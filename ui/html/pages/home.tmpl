{{define "title"}}Home{{end}}

{{define "main"}}
    <h2>Photos</h2>
    <div class="event-list">
        {{range $e := .Events}}
            {{$photos := index $.PhotosByEvent $e.ID}}
            {{if gt (len $photos) 0}}
                <details open="">
                <summary class="event-name">{{with $e.Name}}{{.}}{{else}}Senza gita{{end}}</summary>
                <div class="content photo-flex">
                {{range $photos}}
                    <!-- Have to check for null event, /storage should not be hardcoded-->
                    <a href="/photos/{{.FileName}}" style="display: contents;">
                    <img src="/storage/thumbnails/{{if ne $e.ID -1}}{{$e.Name}}/{{end}}{{.FileName}}" alt="immagine super wow" class="photo"/>
                    </a>
                {{end}}
                </div>
                </details>
            {{end}}
        {{end}}
    </div>
{{end}}

